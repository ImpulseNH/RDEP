<div id= "container">
    <h2 class="text-center my-5 py-2">AGREGAR CLIENTE</h2>
    <div class="col-lg-8 offset-lg-2">
        <div id="container2">
            <div *ngIf="!registro">
                <form [formGroup]="formulario" (ngSubmit)="validar()" novalidate>
                  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"> 
                  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
                  
                  <!-- rut -->
                  <div class="form-group">
                    <h3>RUT</h3>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <div class="input-group-text">
                          <i class="fa fa-address-card"></i>
                        </div>
                      </div> 
                      <input
                      id="rut"
                      type="text"
                      class="form-control"
                      formControlName="rut"
                      placeholder="Ej: 12345678-K"
                      name="rut" value="" pattern="[0-9]{7,8}-[kK|0-9]{1}" maxlength="10" 
                      required
                      />
                    </div>
                    <div *ngIf="formulario.controls['rut'].invalid && (formulario.controls['rut'].touched || formulario.controls['rut'].dirty)" 
                    class="alert alert-danger">
                      <div *ngIf="formulario.controls['rut'].hasError('required')">Campo es obligatorio</div>
                      <div *ngIf="formulario.controls['rut'].hasError">Formato de RUT incorrecto. Ej: 12345678-9</div>
                    </div>
                  </div>

                  <!-- nombre -->
                  <div class="form-group">
                    <h3>Nombre Completo</h3>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <div class="input-group-text">
                          <i class="fa fa-user"></i>
                        </div>
                      </div> 
                      <input id="nombre" name="nombre" placeholder="Ej: Juanito Pérez" type="text" required="required" class="form-control" formControlName="nombre">
                    </div>
                    <div *ngIf="formulario.controls['nombre'].invalid && (formulario.controls['nombre'].touched || formulario.controls['nombre'].dirty)" 
                    class="alert alert-danger alert-dismissible" role="alert">
                      <div *ngIf="formulario.controls['nombre'].hasError('required')">Campo es obligatorio</div>
                      <div *ngIf="formulario.controls['nombre'].hasError('minlength') || formulario.controls['nombre'].hasError('maxlength')">El nombre completo debe contener como mínimo 8 caracteres</div>
                    </div>
                  </div>

                  <!-- alias -->
                  <div class="form-group">
                    <h3>Alias</h3>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <div class="input-group-text">
                          <i class="fa fa-user-circle"></i>
                        </div>
                      </div> 
                      <input id="alias" name="alias" placeholder="Ej: Juanito07" type="text" required="required" class="form-control" formControlName="alias">
                    </div>
                    <div *ngIf="formulario.controls['alias'].invalid && (formulario.controls['alias'].touched || formulario.controls['alias'].dirty)" class="alert alert-danger alert-dismissible" role="alert">
                      <div *ngIf="formulario.controls['alias'].hasError('required')">Campo es obligatorio</div>
                      <div *ngIf="formulario.controls['alias'].hasError('minlength') || formulario.controls['alias'].hasError('maxlength')">El alias debe contener como mínimo 3 caracteres</div>
                    </div>
                  </div>

                  <!-- telefono -->
                  <div class="form-group">
                    <h3>Teléfono</h3>
                    <div class="input-group">
                      <div class="input-group-text">
                        <i class="fa fa-phone"></i>+56
                      </div>
                      <input id="telefono" name="telefono" placeholder="Ej: 123456789" type="text" required="required" class="form-control" formControlName="telefono">
                    </div>
                    <div *ngIf="formulario.controls['telefono'].invalid && (formulario.controls['telefono'].touched || formulario.controls['telefono'].dirty)" class="alert alert-danger">
                      <div *ngIf="formulario.controls['telefono'].hasError('required')">Campo es obligatorio</div>
                      <div *ngIf="formulario.controls['telefono'].hasError('telefono')">Formato de telefono inorrecto, debe contener 9 números</div>
                      <div *ngIf="formulario.controls['telefono'].hasError">Formato de telefono inorrecto, debe contener 9 números</div>
                    </div>
                  </div> 

                  <!-- requiere acceso a la plataforma -->
                  <div class="form-group">
                    <h3>¿Requiere acceso a la plataforma?</h3>
                    <div>
                      <div class="custom-controls-stacked">
                        <div class="custom-control custom-radio">
                          <input (click)="requiereAcceso()" name="acceso" id="radio_0" type="radio" class="custom-control-input" value="si" required="required" formControlName="acceso"> 
                          <label for="radio_0" class="custom-control-label">Sí</label>
                        </div>
                      </div>
                      <div class="custom-controls-stacked">
                        <div class="custom-control custom-radio">
                          <input (click)="noRequiereAcceso()" name="acceso" id="radio_1" type="radio" class="custom-control-input" value="no" required="required" formControlName="acceso"> 
                          <label for="radio_1" class="custom-control-label">No</label>
                        </div>
                      </div>
                    </div>
                  </div> 

                  <!--correo -->
                  <div class="form-group" *ngIf="accede">
                    <h3>Email</h3>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <div class="input-group-text">
                          <i class="fa fa-at"></i>
                        </div>
                      </div> 
                      <input id="email" name="email" placeholder="Ej: email@ejemplo.com" type="text" class="form-control" formControlName="email" required="required">
                    </div>
                    <div *ngIf="formulario.controls['email'].invalid && (formulario.controls['email'].touched || formulario.controls['email'].dirty)" class="alert alert-danger">
                      <div *ngIf="formulario.controls['email'].hasError('required')">Campo es obligatorio</div>
                      <div *ngIf="formulario.controls['email'].hasError('email')">Formato de email incorrecto</div>
                    </div>
                  </div>

                  <!-- boton agregar -->
                  <div class="text-center">
                    <button id="boton" [disabled]="formulario.invalid || formulario.pristine" type="submit" class="btn btn-primary" >Agregar</button>
                  </div>
                </form>
            </div>
            <div *ngIf="registro">
                <h1>Cliente registrado exitosamente</h1>
            </div>
            <div class="col-lg-8 offset-lg-2">
                <hr class="my-5">
                <div class="text-center mb-3">
                </div>
                <div class="text-center">
                    <button [routerLink]="['/admin']" routerLinkActive="router-link-active"  class="btn btn-secondary">Volver atrás</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Error -->
<div class="modal fade" id="modalError" tabindex="-1" role="dialog" aria-labelledby="modalError" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
      <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLongTitle">Error</h5>
      <button type="button" class="cerrar" data-dismiss="modal" aria-label="Cerrar" (click)="close()">
          <span aria-hidden="true">&times;</span>
      </button>
      </div>
      <div class="modal-body">
          El cliente ya existe en el Sistema
      </div>
      <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="close()">Cerrar</button>
      </div>
  </div>
  </div>
</div>